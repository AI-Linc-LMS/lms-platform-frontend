# Updated Backend API Course Interface Documentation

## Course Data Structure Mapping

The frontend now expects the following **exact structure** from the backend API. This matches the actual backend response format you provided:

### Backend Response Fields (Required)

```typescript
{
  // Basic course info
  id: number;                    // 22
  title: string;                 // "Excel Mastery"
  description: string;           // "Unlock the full power of Excel..."
  slug: string;                  // "excel-mastery"
  
  // Pricing & Access
  price: string;                 // "0.00" (string format from backend)
  is_free: boolean;              // true
  
  // Course Details
  difficulty_level: string;      // "Medium"
  duration_in_hours: number;     // 0
  certificate_available: boolean; // true
  language: string;              // "English"
  subtitle: string | null;       // null
  
  // Publishing
  published: boolean;            // true
  client: number;                // 1
  
  // Content & Requirements
  learning_objectives: string;   // ""
  requirements: string;          // ""
  preview_video_url: string | null; // null
  thumbnail: string | null;      // null
  
  // Students & Enrollment
  enrolled_students: {
    total: number;               // 25
    students_profile_pic?: string[]; // Optional array of profile pictures
  };
  
  // Course Statistics (Required)
  stats: {
    video: { total: number; completed: number; };    // {total: 48, completed: 0}
    quiz: { total: number; completed: number; };     // {total: 45, completed: 0}
    article: { total: number; completed: number; };  // {total: 0, completed: 0}
    coding_problem?: { total: number; completed: number; }; // Optional
    assignment?: { total: number; completed: number; };     // Optional
  };
  
  // Social Features
  liked_by: unknown[];           // [] (array of users who liked)
  
  // Endorsements & Tags
  trusted_by: Array<{           // [] (can be populated)
    name: string;
    color?: string;
  }>;
  tags: Array<{                 // [] (can be populated)
    name: string;
    color?: string;
  }>;
  
  // Instructors (Required)
  instructors: Array<{
    id: number;                 // 7
    name: string;               // "Shubham Lal"
    bio: string;                // ""
    profile_pic_url?: string;   // Optional
    linkedin_profile?: string;  // Optional  
  }>;
  
  // Timestamps (Required)
  created_at: string;           // "2025-08-09 13:59:56"
  updated_at: string;           // "2025-08-25 16:32:58"
}
```

### Frontend-Only Fields (Generated by Frontend)

These fields are NOT expected from the backend and will be generated/calculated by the frontend:

```typescript
{
  // User interaction (frontend calculated)
  rating?: number;                    // Default: 4.8
  is_enrolled?: boolean;              // Determined by context
  is_liked_by_current_user?: boolean; // Calculated from liked_by array
  liked_count?: number;               // liked_by.length
  
  // Progress tracking (frontend generated)
  progress_percentage?: number;
  recent_activity?: string;
  current_streak_days?: number;
  badges_earned?: number;
  last_accessed?: string;
  
  // Course structure (frontend generated from stats)
  modules?: Array<{
    id: number;
    title: string;
    weekno: number;
    completion_percentage: number;
    submodules: Array<{
      id: number;
      title: string;
      description: string;
      order: number;
      article_count: number;      // From stats.article.total
      assignment_count: number;   // From stats.assignment.total
      coding_problem_count: number; // From stats.coding_problem.total
      quiz_count: number;         // From stats.quiz.total
      video_count: number;        // From stats.video.total
    }>;
  }>;
  
  // Next lesson info (frontend generated)
  next_lesson?: {
    title: string;
    description: string;
    duration: number;
  };
}
```

## Key Changes Made

1. **Updated Course Interface**: Now matches exact backend response structure
2. **Field Mapping**: Direct mapping from backend fields to frontend usage
3. **Type Consistency**: Maintained backend data types (price as string, etc.)
4. **Nullable Fields**: Properly handled null values from backend
5. **Array Structures**: Supports empty arrays for tags, trusted_by, etc.

## Backend Requirements Summary

âœ… **stats object is REQUIRED** - Must include video, quiz, article with total and completed counts  
âœ… **instructors array is REQUIRED** - Must include at least one instructor  
âœ… **enrolled_students.total is REQUIRED** - Number of enrolled students  
âœ… **String formats preserved** - price as string "0.00", dates as "YYYY-MM-DD HH:mm:ss"  
âœ… **Arrays can be empty** - tags[], trusted_by[], liked_by[] can be empty arrays  
âœ… **Optional fields can be null** - subtitle, preview_video_url, thumbnail can be null  

## Data Transformation

The frontend now:
- Uses backend data directly without complex transformations
- Generates missing frontend-specific fields with defaults
- Maintains backward compatibility with existing components
- Handles nullable fields gracefully

Your existing backend API response structure is now fully supported! ðŸŽ‰
